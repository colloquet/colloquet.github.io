<html>
<head>
	<script src="http://html2canvas.hertzen.com/build/html2canvas.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<style type="text/css">
		#mydiv {
		    width: 200px;
		    height: 200px;
		    position: relative;
			background-size: cover;
		}
		img {
			height: 200px;
			width: 200px;
			z-index: -1;
			position: absolute;
		}
		#overlay {
			position: absolute;
			left: 0;
			top: 0;
			background: rgba(0,0,0,.5);
			width: 100%;
			height: 100%;
			z-index: 0;
		}
		#mydiv p {
			position: relative;
			z-index: 2;
			color: #fff;
		}
	</style>
	<script type="text/javascript">
		function GetRandomBackground()
		{
		 
		  var url = 'http://unsplash.com/rss';
		 
		  $.ajax({
		    url: 'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' + encodeURIComponent(url),
		    async: false,
		    jsonpCallback: 'jsonCallback',
		    contentType: "application/json",
		    dataType: 'jsonp',
		    success: function(json) {
		      
		      var min = 0;
		      var max = json.responseData.feed.entries.length;
		      // and the formula is:
		      var random = Math.floor(Math.random() * (max - min + 1)) + min;
		 
		      var str = json.responseData.feed.entries[random].content;
		 
		      var regex = /<img.*?src="(.*?)"/;
		      var src = regex.exec(str)[1];
		 
		      $('#mydiv').css('background-image','url('+src+')');
		      
		    }
		  });
		 
		}
		function genCan() {

			$("#mydiv p").text($("#line").val());
			html2canvas([document.getElementById('mydiv')], {
			    onrendered: function (canvas) {
			        $('#canvas').html(canvas);
			        var data = canvas.toDataURL('image/png');
			        // AJAX call to send `data` to a PHP file that creates an image from the dataURI string and saves it to a directory on the server

			        var image = new Image();
			        image.src = data;
			        $('#image').html("<a href='"+data+"' download='image.png'>Download</a>");
			    }, useCORS: true
			});
		};
	</script>
</head>
<body>
<div id="mydiv">
    <!-- <img src="https://unsplash.it/200/200?random" /> -->
    <p>text!</p>
    <div id="overlay"></div>
</div>
<br>
<br>
<input type="text" name="line" id="line">
<button id="genCanvas" onclick="GetRandomBackground();">BG</button>
<button id="genCanvas" onclick="genCan();">CANVAS</button>
<p>Canvas:</p>
<div id="canvas"></div>
    
<p>Image:</p>
<div id="image"></div>

</body>
</html>