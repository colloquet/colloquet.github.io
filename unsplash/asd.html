<!DOCTYPE html>
 
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>imgur oauth</title>
    <script src="http://html2canvas.hertzen.com/build/html2canvas.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>
      function genCan() {
        var rand = Math.floor(Math.random() * (6 - 0 + 1)) + 0;

        var bg = "<img src='"+rand+".jpeg'>";
        $("#mydiv img").replaceWith(bg);
        $(".quote").text("“"+$("#quote").val()+"”");
        $(".author").text("- "+$("#author").val());
        $('#image').html("Loading...");
        html2canvas([document.getElementById('mydiv')], {
            onrendered: function (canvas) {
                $('#canvas').html(canvas);
                var data = canvas.toDataURL('image/png');
                // AJAX call to send `data` to a PHP file that creates an image from the dataURI string and saves it to a directory on the server

                var image = new Image();
                image.src = data;
                $('#image').html("<img id='pic' src='"+data+"'>");
                $('#download').html("<a href='"+data+"' download='image.png'>Download</a><span>(If you are not using Chrome/Firefox, right click image 'Save as' and rename to .PNG)</span>");
            }, useCORS: true
        });
        
      };
    </script>
    <style>
      #mydiv {
        width: 600px;
        height: 400px;
        position: relative;

      }
      #mydiv img {
        height: 400px;
        width: 600px;
        z-index: -1;
        position: absolute;
      }
      #overlay {
        position: absolute;
        left: 0;
        top: 0;
        background: rgba(0,0,0,.5);
        width: 100%;
        height: 100%;
        z-index: 0;
      }
      #quoteWrapper {
        position: absolute;
        width: 400px;
        z-index: 2;
        color: #fff;
        left: 50%;
        top: 50%;
        font-size: 24px;
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
      }
      .author {
        text-align: right;
      }
      .logo {
        position: absolute;
        right: 5px;
        bottom: 5px;
        font-size: 12px;
        color: white;
        z-index: 9;
      }
    </style>
  </head>
 
  <body>
    <p>Div:</p>
    <div id="mydiv">
        <img src="" />
        <div id="quoteWrapper">
          <p class="quote">Input your own quotes.</p>
          <p class="author"></p>
        </div>
        <span class="logo">#PostMortem</span>
        <div id="overlay"></div>
    </div>
    <br>
    <input type="text" id="quote" placeholder="Enter your quote">
    <input type="text" id="author" placeholder="Enter author's name">
    <button id="genCanvas" onclick="genCan();">Generate!</button>
    <!-- <p>Canvas:</p>
    <div id="canvas"></div> -->
        
    <p>Image:</p>
    <div id="image"></div>
    <div id="download"></div>
  </body>
</html>