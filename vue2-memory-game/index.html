<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Vue.js 2.0 Memory game</title>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.26.4/css/uikit.min.css">
    <link rel="stylesheet" href="style.css">

    <!-- HTML5 Shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
  <body>
    <div id="app">
      <div class="uk-container uk-container-center uk-margin-large-bottom" v-cloak>
        <div class="game-container">
          <div class="uk-grid uk-grid-divider">
            <div class="uk-width-medium-2-3 uk-grid-margin">
              <div class="uk-panel uk-panel-header">
                <h3 class="uk-panel-title">Vue.js 2.0 memory game</h3>
                <div class="uk-grid">
                  <div class="uk-width-1-2">
                    <p>Matched: <strong>{{ numberOfMatched }}</strong></p>
                  </div>
                  <div class="uk-width-1-2">
                    <p>Time: <strong>{{ computedTime }}</strong></p>
                  </div>
                </div>
                <!-- game board START -->
                <div class="uk-grid uk-grid-collapse">
                  <div v-bind:class="computedTileClass" v-for="tile in tiles" v-bind:key="tile.id">
                    <div class="tile" v-on:click="toggleTile(tile)" v-bind:class="{'flipped': tile.flipped || tile.matched, 'isMatched': tile.matched}">
                      <div class="front"></div>
                      <div class="back uk-flex uk-flex-center uk-flex-middle uk-cover-background" v-bind:style="{backgroundImage: 'url(https://source.unsplash.com/random/300x30' + tile.number + ')'}">
                        <h1 class="uk-margin-remove">{{ tile.number }}</h1>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- game board END -->
              </div>
            </div>
            <div class="uk-width-medium-1-3 uk-grid-margin">
              <!-- score board START -->
              <div class="uk-panel uk-panel-header">
                <h3 class="uk-panel-title">Leaderboard</h3>
                <p v-show="!isScoreBoardLoaded">fetching scores...</p>
                <p v-show="isScoreBoardLoaded && sortedScoreBoard.length == 0">No scores yet</p>
                <ul class="uk-list">
                  <li v-for="score in sortedScoreBoard">
                    <span class="uk-text-truncate">{{ score.name }}</span>
                    <div class="uk-float-right">
                      <strong>{{ score.score }}</strong> ({{score.time}}s)
                    </div>
                  </li>
                </ul>
              </div>
              <!-- score board START -->
            </div>
          </div>
        </div>

        <footer>
          <div class="uk-margin-large-top uk-margin-large-bottom uk-text-center content-container">
            <hr>
            <p>Made with <span class="uk-icon-heart uk-text-danger"></span> by <a href="http://colloquet.github.io">Colloque Tsui</a></p>
          </div>
        </footer>

        <!-- only show this when game is over -->
        <transition name="modal">
          <div class="uk-text-center modal-mask" v-show="showModal">
            <div class="modal-wrapper">
              <div class="modal-container">
                <h3>Finished! Your score is <strong>{{ computedScore }}</strong> in {{ timeInSec }} seconds!</h3>
                <form class="uk-form" v-on:submit.prevent="resetBoard">
                  <input id="name" type="text" placeholder="your name" autofocus v-model="playerName">
                </form>
                <p class="uk-margin-bottom-remove"><button class="uk-button uk-button-primary" v-on:click="resetBoard">Submit and play again</button></p>
              </div>
            </div>
          </div>
        </transition>
      </div>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/vue/2.0.0-rc.3/vue.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/vuefire/1.2.0/vuefire.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
    <script src="application.js"></script>
  </body>
</html>
